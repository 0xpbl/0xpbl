<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">
    <title>QEL@0xpblab - Redirecionando...</title>
    <script>
        // Forçar HTTPS
        if (window.location.protocol === 'http:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            window.location.replace(window.location.href.replace(/^http:/, 'https:'));
        }
        
        // Detectar o base path do GitHub Pages ou domínio customizado
        const hostname = window.location.hostname;
        let basePath = '';
        
        // Domínio customizado: não aplicar base path
        if (hostname === 'dlore.org' || hostname === 'www.dlore.org') {
            basePath = '';
        } else if (hostname.includes('github.io')) {
            const repoName = hostname.split('.')[0]; // 0xpbl.github.io -> 0xpbl
            basePath = '/' + repoName;
        }
        
        // Obter o pathname atual
        const pathname = window.location.pathname;
        let normalizedPath = pathname;
        
        // Se o pathname não começa com o base path, adicionar (apenas para GitHub Pages)
        if (basePath && !pathname.startsWith(basePath)) {
            // Remover barra inicial se presente
            normalizedPath = pathname.startsWith('/') ? pathname.substring(1) : pathname;
            // Construir URL completa com base path
            const redirectUrl = basePath + '/' + normalizedPath + window.location.search + window.location.hash;
            window.location.replace(redirectUrl);
        } else if (basePath && pathname.startsWith(basePath)) {
            // Já tem base path, apenas garantir que está correto
            normalizedPath = pathname.substring(basePath.length) || '/';
            const redirectUrl = basePath + (normalizedPath === '/' ? '' : normalizedPath) + window.location.search + window.location.hash;
            if (window.location.pathname !== redirectUrl) {
                window.location.replace(redirectUrl);
            } else {
                // Se já está correto, carregar o index.html que vai processar a rota
                window.location.replace(basePath + '/index.html' + window.location.search + window.location.hash);
            }
        } else {
            // Sem base path (domínio customizado ou raiz), redirecionar para index
            window.location.replace('/index.html' + window.location.search + window.location.hash);
        }
    </script>
</head>
<body>
    <p>Redirecionando...</p>
</body>
</html>
